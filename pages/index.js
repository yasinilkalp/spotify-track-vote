import Head from 'next/head';
import React, { useEffect } from 'react'; 
import { getTracks } from "../lib/firebase";
import Header from '@/components/header'; 
import TrackList from '@/components/track-list'; 
import TrackSearch from '@/components/track-search';


export default function Home() { 
  const [tracks, setTracks] = React.useState([]);
  const [playTrack, setPlayTrack] = React.useState(null);
 
  const listTracks = React.useCallback(async () => {
    let data = await getTracks();
    setTracks(data);
  }, []);

  useEffect(() => { listTracks(); }, [listTracks]);

  return (
    <>
      <Head>
        <title>LedMusic</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className='h-screen'>
        <div className='max-w-xl m-auto mt-10 relative px-4 lg:px-0'>
          <Header />
          <TrackSearch {...{ listTracks, playTrack, setPlayTrack }} />
          <TrackList {...{ tracks, listTracks, playTrack, setPlayTrack }} />
        </div>
      </main>
    </>
  )
}
